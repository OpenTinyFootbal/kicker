<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!--
  Genral Templates
-->
<template id="assets_frontend" name="Common Assets (used in backend interface and website)" inherit_id="web.assets_frontend">
  <xpath expr="." position="inside">
    <link rel='stylesheet' type="text/less" href='/kicker/static/src/scss/kicker.scss'/>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,700" rel="stylesheet"/>
  </xpath>
</template>

<template id="_assets_frontend_helpers" inherit_id="web_editor._assets_frontend_helpers" priority="15">
        <xpath expr="//link[@href='/web_editor/static/src/scss/bootstrap_overridden.scss']" position="replace">
          <link rel='stylesheet' type="text/less" href='/kicker/static/src/scss/variables.scss'/>
        </xpath>
</template>

<!--
Login Restyling
-->
<template id="login_layout" name="Login Layout" inherit_id='web.login_layout'>
  <xpath expr="//div[hasclass('card-body')]/div" position="attributes">
    <attribute name="t-attf-class">text-center pb-3 border-bottom {{'mb-3' if form_small else 'mb-4'}} d-none d-md-block</attribute>
  </xpath>
  <xpath expr="//div[hasclass('container')]" position="before">
    <div class="login-shape-top">
      <div class="logo-subshape-top"/>
      <img class="d-block d-md-none" src="/kicker/static/icons/logo.svg" alt=""/>
    </div>
  </xpath>
  <xpath expr="//div[hasclass('container')]" position="after">
    <div class="login-shape-bottom"/>
  </xpath>
</template>

<template id="login" name="Login" inherit_id='web.login'>
  <xpath expr="//form//div" position="before">
    <h3 class="text-center text-primary"><strong>Hello.</strong></h3>
  </xpath>
  <xpath expr="//label[@for='login']" position="replace"/>
  <xpath expr="//input[@name='login']" position="replace">
    <input type="text" placeholder="Username" name="login" t-att-value="login" id="login" class="form-control input-ul rounded-0" required="required" autofocus="autofocus" autocapitalize="off"/>
  </xpath>
  <xpath expr="//label[@for='password']" position="replace"/>
  <xpath expr="//input[@name='password']" position="replace">
    <t t-call="kicker.password_field_reveal"/>
  </xpath>
  <xpath expr="//button[@type='submit']" position="attributes">
    <attribute name="class">btn btn-primary btn-block rounded-btn</attribute>
  </xpath>
</template>

<template id="signup_kicker" name="Signup" inherit_id="auth_signup.fields">
  <xpath expr="//label[@for='login']" position="replace">
    <label for="login">Your @odoo.com Email</label>
  </xpath>

  <xpath expr="//label[@for='name']" position="replace">
    <label for="name">Your Player Name (login)</label>
  </xpath>
  <xpath expr="." position="inside">
    <div class="alert alert-info">
      <p>Your account will require manual validation before being able to access the app.
      <button class='btn btn-sm btn-link' data-toggle='collapse' data-target='#o_kicker_privacy'><i class="fa fa-question-circle" type="button"/> Why</button></p>
      <div class="collapse" id="o_kicker_privacy">
        <p>We take your privacy seriously, therefore we want to make sure that all new users are <em>actual</em> Odoo employees and <em>actual</em> kicker players.</p>
        <p>We don't want this app to become an employee monitoring tool for team leaders or managers.</p>
        <p>We will contact you directly to confirm your sign-up request personnally before validating your account.</p>
      </div>
    </div>
  </xpath>
</template>

<!-- Reveal password field (button to see the password). The only param is name (the nname attribute of the field)-->
<template id="password_field_reveal" name="Password Field Reveal (can show and hide the password)">
  <div class="odoo-password-reveal input-group">
    <input type="password" placeholder="Password" name="password" id="password" class="form-control input-ul rounded-0" required="required" autocomplete="current-password" t-att-autofocus="'autofocus' if login else None" maxlength="4096"/>
    <button class="btn btn-link input-ul rounded-0" type="button">
      <img src="/kicker/static/icons/eye.svg" width="14px" alt=""/>
    </button>
  </div>
  <!-- Js for the password reveal field -->
  <script type="text/javascript">
    $(function() {
      $('.odoo-password-reveal button').click(function(){
          if($(".odoo-password-reveal input").attr('type') === 'password'){
              $(".odoo-password-reveal input").replaceWith($('.odoo-password-reveal input').clone().attr('type', 'text'));
          }else{
              $(".odoo-password-reveal input").replaceWith($('.odoo-password-reveal input').clone().attr('type', 'password'));
          }
      });
    });
  </script>
</template>

<!-- disable enterprise login override -->
<record model="ir.ui.view" id="web_enterprise.webclient_login">
  <field name="active" eval="False"/>
</record>

</odoo>
